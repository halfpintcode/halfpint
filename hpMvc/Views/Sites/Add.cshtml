@model hpMvc.Models.SiteInfo

@{
    ViewBag.Title = "Add New Site";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style rel="stylesheet" type="text/css" >
    fieldset {
        line-height: 25px;
    }
    .lbleditor {
        width: 160px;
        display: inline-block;
    }
    .col2 
    {
        display: inline-block;
        margin-left: 5px;
    }
    .text-box {
        width: 500px;
    }
    .underline {
        text-decoration: underline; 
    }
</style>
<script type="text/javascript">
    $(function () {
        if ($('#IsEmployeeIdRequired').attr("checked") !== "checked") {
            $('#EmployeeIdRegEx').val("");
            $('#EmployeeIdRegEx').attr("disabled", "disabled");
            $('#EmployeeIdMessage').val("");
            $('#EmployeeIdMessage').attr("disabled", "disabled");
        }
        else {
            $('#EmployeeIdRegEx').attr("disabled", false);
            $('#EmployeeIdMessage').attr("disabled", false);
        }

        $('#IsEmployeeIdRequired').change(function () {
            if ($(this).attr("checked") !== "checked") {
                $('#EmployeeIdRegEx').val("");
                $('#EmployeeIdRegEx').attr("disabled", "disabled");
                $('#EmployeeIdMessage').val("");
                $('#EmployeeIdMessage').attr("disabled", "disabled");
            }
            else {
                $('#EmployeeIdRegEx').attr("disabled", false);
                $('#EmployeeIdMessage').attr("disabled", false);
            }
        });
    });
</script>
<h2>Add New Site</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm("Add", "Sites", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Site Details</legend>
        <div>
            <span class="lbleditor">Name:</span>
            <span class="col2"> 
                @Html.EditorFor(model => model.Name)
                @Html.ValidationMessageFor(model => model.Name)
            </span>
        </div>
        
        <div>
            <span class="lbleditor">SiteID:</span>
            <span class="col2"> 
                @Html.EditorFor(model => model.SiteId)
                @Html.ValidationMessageFor(model => model.SiteId)
            </span>
        </div>

        <div>
            <span class="lbleditor">Is Employee Id Required:</span>
            <span class="col2"> 
                @Html.EditorFor(model => model.IsEmployeeIdRequired)
            </span>
        </div>
    
        <div>
            <span class="lbleditor">Employee Id RegEx:</span>
            <span class="col2"> 
                @Html.EditorFor(model => model.EmployeeIdRegEx)
                @Html.ValidationMessageFor(model => model.EmployeeIdRegEx) 
            </span>
        </div>
        
        <div>
            <span class="lbleditor">Employee Id Message:</span>
            <span class="col2"> 
                @Html.EditorFor(model => model.EmployeeIdMessage)
                @Html.ValidationMessageFor(model => model.EmployeeIdMessage)
            </span>
        </div>

        <div>
            <span class="lbleditor">Active:</span>
            <span class="col2"> 
                @Html.EditorFor(model => model.IsActive)
            </span>
        </div>

        <div>
            <span class="lbleditor">Use Sensor:</span>
            <span class="col2"> 
                @Html.EditorFor(model => model.UseSensor)
            </span>
        </div>
        
        <div>
            <span class="underline">Insulin Concentrations Used:</span>
            @for (int i = 0; i < @Model.InsulinConcentrations.Count; i++)
            {
                <div>
                    @Html.HiddenFor(m => @Model.InsulinConcentrations[i].Id)
                    <span class="lbleditor">@Model.InsulinConcentrations[i].Name</span>
                    @Html.EditorFor(m => @Model.InsulinConcentrations[i].IsUsed)
                </div>
            }
            
        </div>
        <div>
            <span class="lbleditor">Select the study id's file upload file:</span>
            <span class="col2">
                <input type="file" name="[0].files" id="files_0" />
            </span>
            <br/>
            <span class="lbleditor">Select the radomization file upload file:</span>
            <span class="col2">
                <input type="file" name="[1].files" id="files_1" />
            </span>
        </div>
        <p>
            <input type="submit" value="Submit" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>
