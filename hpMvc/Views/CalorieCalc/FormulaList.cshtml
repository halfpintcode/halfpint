@model List<hpMvc.Models.EnteralFormula>

@{
    ViewBag.Title = "Formula List";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style type="text/css">
    .webgrid{ margin: 4px;border-collapse: collapse;} 
    .webgrid th, .webgrid td{ border: 1px solid #c0c0c0;padding: 5px;}   
    .header{ background-color: #E8E8E8;font-weight: bold;color:#fff}
    .alt{ background-color: #e8e8e8; color:#000}
</style>
<h2>Formula List</h2>

<div>
    @{
 
        var grid = new WebGrid(Model, defaultSort: "SiteId", rowsPerPage: 50);
        
    }
 
    @if (@ViewBag.Role == "Admin")
    {
        @grid.GetHtml(
            tableStyle: "webgrid", headerStyle: "header", alternatingRowStyle: "alt",
            columns: grid.Columns(
                grid.Column("ID", header: "Internal Id"),
                grid.Column("Name", header: "Formula Name", format: @<text>@Html.ActionLink((string) item.Name, "FormulaDetails", "CalorieCalc", new {id = item.ID}, null)</text>),
                grid.Column("Kcal_ml", header: "kCal per unit", format: (item) => string.Format("{0:N}", item.Kcal_ml)),
                grid.Column("ProteinKcal", header: "Protein % of kcal"),
                grid.Column("ChoKcal", header: "CHO % of kcal"),
                grid.Column("LipidKcal", header: "Lipid % of kcal")
                ))  
    }
    else
    {
        @grid.GetHtml(
            tableStyle: "webgrid", headerStyle: "header", alternatingRowStyle: "alt",
            columns: grid.Columns(
                grid.Column("ID", header: "Internal Id"),
                grid.Column("Name", header: "Formula Name"),
                grid.Column("Kcal_ml", header: "kCal per unit", format: (item) => string.Format("{0:N}", item.Kcal_ml)),
                grid.Column("ProteinKcal", header: "Protein % of kcal"),
                grid.Column("ChoKcal", header: "CHO % of kcal"),
                grid.Column("LipidKcal", header: "Lipid % of kcal")
                ))
    }
</div>
